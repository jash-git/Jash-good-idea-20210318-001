var config={apiKey:"AIzaSyDd7EVYLemDRf_qCSFWSdW4Fcr_0Csnepk",authDomain:"udnfcm.firebaseapp.com",databaseURL:"https://udnfcm.firebaseio.com",storageBucket:"udnfcm.appspot.com",messagingSenderId:"938309756562",  projectId: "udnfcm", appId: "1:938309756562:web:a03261045301fe3e00284b"};firebase.initializeApp(config);const messaging=firebase.messaging();messaging.requestPermission().then(function(){messaging.getToken().then(function(currentToken){if(currentToken){var data='?token='+currentToken+"&session="+getCookie("__eruid");fetch("/fcm/fetchToken"+data,{method:"GET"}).then(function(response){if(response.ok){return response.text().then(function(data){console.log(data);});}}).catch(function(error){console.log("error:"+error);});}else{console.log('No Instance ID token available. Request permission to generate one.');}})}).catch(function(err){console.log('Unable to get permission to notify.',err);});messaging.usePublicVapidKey('BBY20PXE-bikn49EWxZUBSReydFrBslDACk_py14isSY3ZIBUHkDXr5XEGyCGRrRsEz15dmkRIZ9pvyN7CBYQVE');messaging.onMessage(function(payload){const notificationTitle=payload.notification.title;const notificationOptions={body:payload.notification.body,icon:payload.notification.icon,tag:payload.notification.body};if(!("Notification"in window)){console.log("This browser does not support system notifications");}else if(Notification.permission==="granted"){var notification=new Notification(notificationTitle,notificationOptions);notification.onclick=function(event){event.preventDefault();window.open(payload.notification.click_action,'_blank');notification.close();}}});
